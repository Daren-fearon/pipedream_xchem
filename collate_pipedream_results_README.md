his script aggregates ligand and refinement statistics from multiple Pipedream project directories. It is designed to consume the output of the `pipedream_xchem.py` script.

# **📁 Input**

- The input is a JSON file named `ipedream_<timestamp>_output.json`, automatically generated by a prior step in the pipeline either in your specified directory, or the default directory e.g.
    
     `Processing_directory/analysis/Pipedream/Pipedream_<timestamp>`.
    

# **🚀 Usage**

To run the script from the command line, follow these steps:

> 💡 Steps 1 and 2 can be skipped if you're already in the XChem environment.
> 
1. **Initialize micromamba (if needed):**

`micromamba-init`

1. **Activate the XChem environment (if needed):**

`micromamba activate xchem` 

1. **Run the script:**

`python /dls/science/groups/i04-1/software/pipedream/collate_pipedream_results.py --json /path/to/Pipedream_<timestamp>/output.json`

1. Inspect the produced html file and select datasets you wish to export back to XCE for further refinement/polishing. Datasets with ligand CC >0.8 will be autoselected.

### **Optional Arguments**

- `--output_file`: Specify a custom path for the output files. If omitted, a timestamped json and html will be created in the same directory as the input YAML file.

### **Example**

`python /dls/science/groups/i04-1/software/pipedream/collate_pipedream_results.py --yaml Pipedream_20250618_143000/output.yaml --output_file Pipedream_20250618_143000/my_data`

# **📝 Output**

- A json and HTML file containing extracted statistics for each dataset.
- A log file named `collate_pipedream_results.log`
